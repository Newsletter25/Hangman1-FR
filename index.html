<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le jeu du pendu</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        #hangman-container {
            font-family: monospace;
            white-space: pre-wrap; /* Makes sure \n and spaces are respected */
            font-size: 20px;
        }
        #wrong-guesses { margin-top: 20px; text-decoration: line-through; color: red; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <h1>Le jeu du pendu</h1>
    <p><strong>Indice:</strong> [Indice fictif]</p>
    <p>Devinez le mot avant que le pendu ne soit complété. Si tu devines une bonne lettre, elle sera ajoutée à la ligne pointillée. Si tu devines une mauvaise lettre, une partie du corps sera dessinée sur le pendu. Le jeu se termine lorsque le mot est trouvé ou que le pendu est complété.</p>
    <div id="hangman-container"></div>
    <p id="word-display"></p>
    <input type="text" id="guess-input" maxlength="1" placeholder="Enter a letter">
    <button onclick="makeGuess()">Guess</button>
    <p id="wrong-guesses"></p>

    <!-- Added the information page reference -->
    <p>Pour plus d’informations à ce sujet, consulter la page ________________________.</p>

    <script>
        const correctWord = "DILIGENCE RAISONNABLE".toUpperCase();
        
        // Adjusted the guessedWord initialization to preserve spaces between words
        let guessedWord = correctWord.split('').map(letter => letter === ' ' ? ' ' : '_').join('');
        let wrongGuesses = [];
        let incorrectGuesses = 0;

        function updateDisplay() {
            // Display the word with spaces properly formatted
            document.getElementById('word-display').textContent = guessedWord.split('').join(' ');
            document.getElementById('hangman-container').textContent = drawHangman(incorrectGuesses);
            document.getElementById('wrong-guesses').innerHTML = wrongGuesses.map(letter => `<span style="text-decoration: line-through;">${letter}</span>`).join(' ');
        }

        function makeGuess() {
            let guess = document.getElementById('guess-input').value.toUpperCase();
            document.getElementById('guess-input').value = '';
            if (!guess || guessedWord.includes(guess) || wrongGuesses.includes(guess)) return;

            if (correctWord.includes(guess)) {
                guessedWord = correctWord.split('').map((letter, i) => letter === guess ? guess : guessedWord[i]).join('');
            } else {
                wrongGuesses.push(guess);
                incorrectGuesses++;
            }
            updateDisplay();

            if (guessedWord === correctWord) {
                alert("Bravo! Tu as trouvé le mot.");
            } else if (incorrectGuesses >= 8) {
                alert("C'est fini! Le bon mot était: " + correctWord);
            }
        }

        function drawHangman(stage) {
            const hangmanStages = [
                "       _____\n      |     |\n      |\n      |\n      |\n     _|_____\n",  // 0: empty state (gallows)
                "       _____\n      |     |\n      |     O\n      |\n      |\n     _|_____\n",  // 1: head
                "       _____\n      |     |\n      |     O\n      |     |\n      |\n     _|_____\n",  // 2: torso
                "       _____\n      |     |\n      |     O\n      |    /|\n      |\n     _|_____\n",  // 3: left arm
                "       _____\n      |     |\n      |     O\n      |    /|\\\n      |\n     _|_____\n",  // 4: right arm
                "       _____\n      |     |\n      |     O\n      |    /|\\\n      |    / \n     _|_____\n",  // 5: left leg
                "       _____\n      |     |\n      |     O\n      |    /|\\\n      |    / \\\n     _|_____\n",  // 6: right leg
                "       _____\n      |     |\n      |     X\n      |    /|\\\n      |    / \\\n     _|_____\n"   // 7: X eyes (game over)
            ];

            // Aligning all hangman stages vertically with consistent spacing
            const alignedStages = hangmanStages.map(stage => {
                return stage.split('\n').map(line => {
                    return line.padEnd(19); // Adjust the length of each line to ensure vertical alignment
                }).join('\n');
            });

            return alignedStages[Math.min(stage, hangmanStages.length - 1)];
        }

        updateDisplay();
    </script>
</body>
</html>
